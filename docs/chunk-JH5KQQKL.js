import{A,Ba as b,Ca as w,Da as g,Ea as U,Fa as V,Ga as a,Ha as r,Ia as p,J as T,Ja as B,K as R,Ka as Y,La as l,Ma as _,Na as z,Oa as G,P as u,Pa as H,U as F,Ua as J,W as q,X as $,_ as M,cb as K,da as L,ea as m,gb as D,hb as P,jb as v,kb as O,l as I,oa as o,ua as f,v as j,wa as h,z as S}from"./chunk-YFZEAB5K.js";var x=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading"],[1,"loading__spinner"]],template:function(t,i){t&1&&(a(0,"div",0),p(1,"span",1),r())},styles:[".loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:20px}.loading__spinner[_ngcontent-%COMP%]{width:24px;height:24px;display:block;border:4px solid rgba(255,255,255,.1);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var W=D("fadeIn",[O(":enter",[v({opacity:0}),P("0.3s ease",v({opacity:1}))])]);var ee=(n,e)=>e.id;function te(n,e){if(n&1&&(a(0,"span",5),_(1," \u2193 "),r()),n&2){let t=l().$implicit,i=l();w("expanded",i.isExpanded(t))}}function ne(n,e){if(n&1&&p(0,"app-tree",4),n&2){let t=l().$implicit;b("nodes",t.children)("@fadeIn",void 0)}}function ie(n,e){if(n&1){let t=B();a(0,"li")(1,"div",1),Y("click",function(){let c=q(t).$implicit,s=l();return $(s.toggleNode(c))}),h(2,te,2,2,"span",2),a(3,"span",3),_(4),r()(),h(5,ne,1,2,"app-tree",4),r()}if(n&2){let t=e.$implicit,i=l();o(),w("deleted",t.is_deleted),o(),g(i.hasChildren(t)?2:-1),o(2),z(" ",t.id," - ",t.title," "),o(),g(i.hasChildren(t)&&i.isExpanded(t)?5:-1)}}var C=class n{nodes=L([]);expandedNodes=new Set;toggleNode(e){this.hasChildren(e)&&(this.expandedNodes.has(e.id)?this.expandedNodes.delete(e.id):this.expandedNodes.add(e.id))}hasChildren(e){return e.children&&e.children.length>0}isExpanded(e){return this.expandedNodes.has(e.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-tree"]],inputs:{nodes:[1,"nodes"]},decls:3,vars:0,consts:[[1,"tree"],[1,"node",3,"click"],[1,"arrow",3,"expanded"],[1,"node-content"],[3,"nodes"],[1,"arrow"]],template:function(t,i){t&1&&(a(0,"ul",0),U(1,ie,6,6,"li",null,ee),r()),t&2&&(o(),V(i.nodes()))},dependencies:[n],styles:[".tree[_ngcontent-%COMP%]{list-style-type:none;margin:0;background:#ffffff1a;padding:10px;border-radius:5px}.tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .tree[_ngcontent-%COMP%]{padding-left:20px}.node[_ngcontent-%COMP%]{cursor:pointer;padding:8px 0;display:flex;align-items:center;transition:var(--trans-05s)}.node[_ngcontent-%COMP%]:hover{color:var(--accent-hover)}.node.deleted[_ngcontent-%COMP%]{color:#999}.node.deleted[_ngcontent-%COMP%]:hover{color:#eee}.arrow[_ngcontent-%COMP%]{margin-right:8px;font-weight:700;transition:var(--trans-02s)}.arrow.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}"],data:{animation:[W]}})};var X=[{id:1,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 1",is_deleted:!1,children:[{id:2,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 1.1",is_deleted:!1,children:[{id:3,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 1.1.1",is_deleted:!0,children:[]}]},{id:4,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 1.2",is_deleted:!1,children:[{id:5,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 1.2.1",is_deleted:!1,children:[]},{id:6,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 1.2.2",is_deleted:!1,children:[]}]}]},{id:7,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2",is_deleted:!1,children:[{id:8,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1",is_deleted:!0,children:[{id:9,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1.1",is_deleted:!0,children:[{id:10,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1.1.1",is_deleted:!0,children:[{id:11,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1.1.1.1",is_deleted:!0,children:[{id:12,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1.1.1.1.1",is_deleted:!1,deleted_at:null,children:[{id:13,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1.1.1.1.1.1",is_deleted:!1,children:[]}]},{id:13,title:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 2.1.1.1.1.2",is_deleted:!1,children:[]}]}]}]}]}]}];var y=class n{http=u(K);getTreeData(){let e=Math.floor(Math.random()*1e3+200);return console.log(`Delay: ${e}ms`),I(X).pipe(S(e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function N(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&F(N);let i=t?e?.injector?.get(M)??u(M):null,c=re(e?.equal),s;e?.requireSync?s=m({kind:0},{equal:c}):s=m({kind:1,value:e?.initialValue},{equal:c});let E=n.subscribe({next:d=>s.set({kind:1,value:d}),error:d=>{if(e?.rejectErrors)throw d;s.set({kind:2,error:d})}});if(e?.requireSync&&s().kind===0)throw new T(601,!1);return i?.onDestroy(E.unsubscribe.bind(E)),J(()=>{let d=s();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new T(601,!1)}},{equal:e?.equal})}function re(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var oe=()=>[];function ae(n,e){if(n&1&&p(0,"app-tree",2),n&2){let t,i=l();b("nodes",(t=i.treeNodes())!==null&&t!==void 0?t:H(1,oe))}}function se(n,e){n&1&&p(0,"app-loading")}var Z=class n{treeService=u(y);treeNodes=N(this.getTreeData(),{});error=m(null);loading=m(!0);getTreeData(){return this.treeService.getTreeData().pipe(j(e=>(console.error("Error fetching tree data:",e),[])),A(()=>this.loading.set(!1)))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-main-page"]],features:[G([y])],decls:6,vars:2,consts:[[1,"main-page"],[1,"app-container"],[3,"nodes"]],template:function(t,i){if(t&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),_(3,"Tree Component"),r(),h(4,ae,1,2,"app-tree",2)(5,se,1,0,"app-loading"),r()()),t&2){let c;o(4),g((c=i.treeNodes())!=null&&c.length?4:-1),o(),g(i.loading()?5:-1)}},dependencies:[C,x],styles:[".app-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-top:20vh;gap:20px}"]})};export{Z as MainPageComponent};
