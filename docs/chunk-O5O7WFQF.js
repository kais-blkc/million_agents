import{A as S,Ba as b,Ca as w,Da as g,Ea as U,Fa as L,Ga as a,Ha as o,Ia as p,J as T,Ja as V,K as A,Ka as B,La as c,Ma as y,Na as Y,Oa as z,P as u,Pa as G,U as R,Ua as H,W as F,X as q,_ as M,cb as J,da as $,ea as m,gb as D,hb as P,jb as v,kb as O,oa as i,ua as f,v as j,wa as h,z as I}from"./chunk-YFZEAB5K.js";var x=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"loading"],[1,"loading__spinner"]],template:function(t,r){t&1&&(a(0,"div",0),p(1,"span",1),o())},styles:[".loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:20px}.loading__spinner[_ngcontent-%COMP%]{width:24px;height:24px;display:block;border:4px solid rgba(255,255,255,.1);border-top:4px solid var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var Q=D("fadeIn",[O(":enter",[v({opacity:0}),P("0.3s ease",v({opacity:1}))])]);var Z=(n,e)=>e.id;function ee(n,e){if(n&1&&(a(0,"span",5),y(1," \u2193 "),o()),n&2){let t=c().$implicit,r=c();w("expanded",r.isExpanded(t))}}function te(n,e){if(n&1&&p(0,"app-tree",4),n&2){let t=c().$implicit;b("nodes",t.children)("@fadeIn",void 0)}}function ne(n,e){if(n&1){let t=V();a(0,"li")(1,"div",1),B("click",function(){let l=F(t).$implicit,s=c();return q(s.toggleNode(l))}),h(2,ee,2,2,"span",2),a(3,"span",3),y(4),o()(),h(5,te,1,2,"app-tree",4),o()}if(n&2){let t=e.$implicit,r=c();i(),w("deleted",t.is_deleted),i(),g(r.hasChildren(t)?2:-1),i(2),Y(" ",t.id," - ",t.title," "),i(),g(r.hasChildren(t)&&r.isExpanded(t)?5:-1)}}var C=class n{nodes=$([]);expandedNodes=new Set;toggleNode(e){this.hasChildren(e)&&(this.expandedNodes.has(e.id)?this.expandedNodes.delete(e.id):this.expandedNodes.add(e.id))}hasChildren(e){return e.children&&e.children.length>0}isExpanded(e){return this.expandedNodes.has(e.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-tree"]],inputs:{nodes:[1,"nodes"]},decls:3,vars:0,consts:[[1,"tree"],[1,"node",3,"click"],[1,"arrow",3,"expanded"],[1,"node-content"],[3,"nodes"],[1,"arrow"]],template:function(t,r){t&1&&(a(0,"ul",0),U(1,ne,6,6,"li",null,Z),o()),t&2&&(i(),L(r.nodes()))},dependencies:[n],styles:[".tree[_ngcontent-%COMP%]{list-style-type:none;margin:0;background:#ffffff1a;padding:10px;border-radius:5px}.tree[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .tree[_ngcontent-%COMP%]{padding-left:20px}.node[_ngcontent-%COMP%]{cursor:pointer;padding:8px 0;display:flex;align-items:center;transition:var(--trans-05s)}.node[_ngcontent-%COMP%]:hover{color:var(--accent-hover)}.node.deleted[_ngcontent-%COMP%]{color:#999}.node.deleted[_ngcontent-%COMP%]:hover{color:#eee}.arrow[_ngcontent-%COMP%]{margin-right:8px;font-weight:700;transition:var(--trans-02s)}.arrow.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}"],data:{animation:[Q]}})};var W={production:!1,treeDataUrl:"/tree-data.json"};var _=class n{http=u(J);getTreeData(){let e=Math.floor(Math.random()*1e3+200);return console.log(`Delay: ${e}ms`),this.http.get(W.treeDataUrl).pipe(I(e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})};function k(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&R(k);let r=t?e?.injector?.get(M)??u(M):null,l=re(e?.equal),s;e?.requireSync?s=m({kind:0},{equal:l}):s=m({kind:1,value:e?.initialValue},{equal:l});let E=n.subscribe({next:d=>s.set({kind:1,value:d}),error:d=>{if(e?.rejectErrors)throw d;s.set({kind:2,error:d})}});if(e?.requireSync&&s().kind===0)throw new T(601,!1);return r?.onDestroy(E.unsubscribe.bind(E)),H(()=>{let d=s();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new T(601,!1)}},{equal:e?.equal})}function re(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var oe=()=>[];function ie(n,e){if(n&1&&p(0,"app-tree",2),n&2){let t,r=c();b("nodes",(t=r.treeNodes())!==null&&t!==void 0?t:G(1,oe))}}function ae(n,e){n&1&&p(0,"app-loading")}var X=class n{treeService=u(_);treeNodes=k(this.getTreeData(),{});error=m(null);loading=m(!0);getTreeData(){return this.treeService.getTreeData().pipe(j(e=>(console.error("Error fetching tree data:",e),[])),S(()=>this.loading.set(!1)))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["app-main-page"]],features:[z([_])],decls:6,vars:2,consts:[[1,"main-page"],[1,"app-container"],[3,"nodes"]],template:function(t,r){if(t&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),y(3,"Tree Component"),o(),h(4,ie,1,2,"app-tree",2)(5,ae,1,0,"app-loading"),o()()),t&2){let l;i(4),g((l=r.treeNodes())!=null&&l.length?4:-1),i(),g(r.loading()?5:-1)}},dependencies:[C,x],styles:[".app-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-top:20vh;gap:20px}"]})};export{X as MainPageComponent};
